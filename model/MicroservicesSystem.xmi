<?xml version="1.0" encoding="UTF-8"?>
<Microservice:MicroservicesSystem
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:Microservice="platform:/resource/ProjetMicroservice/model/Microservice.ecore"
    name="ProductCatalogSystem">
  <elements
      xsi:type="Microservice:Model"
      name="Product"
      tableName="products">
    <fields
        name="productId"
        type="INTEGER"
        primaryKey="true"
        required="true"
        visibility="PRIVATE"/>
    <fields
        name="name"
        required="true"
        visibility="PRIVATE"/>
    <relations
        name="category"
        source="//@elements.0"
        target="//@elements.1"
        type="MANY_TO_ONE"/>
  </elements>
  <elements
      xsi:type="Microservice:Model"
      name="Category"
      tableName="categories">
    <fields
        name="categoryId"
        type="INTEGER"
        primaryKey="true"
        required="true"
        visibility="PRIVATE"/>
    <fields
        name="name"
        required="true"
        visibility="PRIVATE"/>
    <relations
        name="products"
        source="//@elements.1"
        target="//@elements.0"
        type="ONE_TO_MANY"/>
  </elements>
  <elements
      xsi:type="Microservice:Service"
      name="CategoryService"
      model="//@elements.1"
      description="Service for managing categories"/>
  <elements
      xsi:type="Microservice:Service"
      name="ProductService"
      model="//@elements.0"
      description="Service for managing products"/>
  <elements
      xsi:type="Microservice:Endpoint"
      name="getCategoryById"
      path="/api/categories/{id}"
      service="//@elements.2"/>
  <elements
      xsi:type="Microservice:Endpoint"
      name="createCategory"
      path="/api/categories"
      method="POST"
      service="//@elements.2"/>
  <elements
      xsi:type="Microservice:Endpoint"
      name="getProductById"
      path="/api/products/{id}"
      service="//@elements.3"/>
  <elements
      xsi:type="Microservice:Endpoint"
      name="createProduct"
      path="/api/products"
      method="POST"
      service="//@elements.3"/>
  <elements
      xsi:type="Microservice:Endpoint"
      name="deleteCategory"
      path="/api/categorys/{id}"
      method="DELETE"
      service="//@elements.2"/>
  <elements
      xsi:type="Microservice:Endpoint"
      name="deleteProduct"
      path="/api/products/{id}"
      method="DELETE"/>
</Microservice:MicroservicesSystem>
